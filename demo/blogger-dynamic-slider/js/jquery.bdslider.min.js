/**
 *  jQuery BloggerDynamicSlider v1.0.0
 *  Copyright 2016 http://shuvojitdas.com
 *  Contributing Author: Shuvojit Das
 *
 */
! function(a) {
    a.fn.BloggerDynamicSlider = function(b) {
    	// Default settings/options
        var c = a.extend({
            blogURL: "", // Your Blog URL. example: "http://imagesliderforblogger.blogspot.com"
            labelName: "", // Show posts from specific Label. Specify a 'Label', or leave it empty to fetch from all recent posts
            maxItem: 6, // Max number of Slider Posts to show
            showPostTitle: true, // Show post title as Caption ? (true/false)
            postTitleStyle: "default", // Select post title/caption style "default, "overlayDark" or "overlayLight"
            imageWidth: 544, // Image width in px value
            imageHeight: 280, // Image height in px value
            animation: "fade", // Select your animation type, "fade" or "slide"
            controlNav: true, // Navigation for paging control of each slide? (true/false)
            directionNav: true, // Previous/next navigation? (true/false)
            pauseOnHover: false, // Pause slideshow when hovering over slider, then resume when no longer hovering (true/false)
            slideshowSpeed: 7000, // Set the speed of the slideshow cycling, in milliseconds
            animationSpeed: 600, // Set the speed of animations, in milliseconds
            animationLoop: true, // Should the animation loop? (true/false)

        }, b);


        return this.each(function() {
            var b = a(this),
                d = b.attr("id"),
                e = c.blogURL + "/feeds/posts/summary/" + (0 == c.labelName.length ? "" : "-/" + c.labelName.replace(/\,(\s+)?/g, "/")) + "?max-results=" + c.maxItem + "&orderby=published&alt=json-in-script";
            a.ajax({
                type: "GET",
                url: e,
                async: !1,
                contentType: "application/json",
                dataType: "jsonp",
                success: function(a) {
                    var f, g, h, i, j, k, l, m, n, o, p, q, e = a.feed.entry || [];
                    for (f = "", f += '<div class="flexslider loading" style="max-width:' + c.imageWidth + 'px">', f += '<ul class="slides">', g = 0; g < e.length; ++g) {
                        for (i = e[g], j = i.title.$t, k = i.media$thumbnail ? i.media$thumbnail.url : "http://3.bp.blogspot.com/-sWtp_qRPNT8/UZYmQq5sAdI/AAAAAAAAEec/7YDbpK4Q6g8/s72-c/default+image.png", l = k.replace("s72-c", "w" + c.imageWidth + "-h" + c.imageHeight + "-c"), m = i.link || [], h = 0; h < m.length && "alternate" != m[h].rel; ++h);
                        n = m[h].href, o = '<img src="' + l + '" width="' + c.imageWidth + '" height="' + c.imageHeight + '"/>', p = c.showPostTitle ? '<p class="flex-caption' + ("default" == c.postTitleStyle ? "" : " " + c.postTitleStyle) + '"><span>' + j + "</span></p>" : "", q = '<a href="' + n + '" target="_blank" title="' + j + '">' + o + p + "</a>", f += "<li>" + q + "</li>"
                    }
                    f += "</ul></div>", f += '<style type="text/css">#' + d + " .flexslider.loading {min-height:" + c.imageHeight + "px !important;}</style>", b.append(f)
                },
                
                error: function(a, c, d) {
                    b.append('<div class="error"><p>No Result! Or Error Loading Feed</p></div')
                },

                complete: function() {
                    a("#" + d + " .flexslider").flexslider({
                        animation: c.animation,
                        controlNav: c.controlNav,
                        directionNav: c.directionNav,
                        pauseOnHover: c.pauseOnHover,
                        slideshowSpeed: c.slideshowSpeed,
                        animationSpeed: c.animationSpeed,
                        animationLoop: c.animationLoop
                    });
                    var b = a("#" + d + " .flexslider ul.slides li a img"),
                        e = 0;
                    b.on("load", function() {
                        if (e++, e == b.length - 1) {
                            var c = a("#" + d + " .flexslider").data("flexslider");
                            c.animating = !1, c.flexAnimate(0), a("#" + d + " .flexslider").removeClass("loading")
                        }
                    })
                }
            })
        })
    }
}(jQuery);
