(function($){$.fn.BloggerGallery=function(options){var settings=$.extend({blogURL:"",maxItem:6,imageWidth:544,imageHeight:280,buttonText:"Read More",labelName:"Gallery",},options);var maxResults=150;var entries=[];var allEntries=[];var THIS=$(this);window.maxItem=settings.maxItem;window.GalleryBuilder=function(start,limit){console.log(allEntries.length);var skeleton="";if(allEntries.length<limit){limit=allEntries.length};console.log(limit);for(var i=start;i<limit;++i){post=allEntries[i];imgUrl=post.media$thumbnail?post.media$thumbnail.url:'http://3.bp.blogspot.com/-sWtp_qRPNT8/UZYmQq5sAdI/AAAAAAAAEec/7YDbpK4Q6g8/s72-c/default+image.png';newImgUrl=imgUrl.replace('s72-c','w'+40+'-h'+30+'-c');links=post.link||[];for(j=0;j<links.length;++j){if(links[j].rel=='alternate')break}
postUrl=links[j].href;var postId=post.id.$t;postId=postId.substring(postId.indexOf("post"));var progressiveImage='<div class="progressiveImage" data-width="'+settings.imageWidth+'" data-height="'+settings.imageHeight+'" data-source="blogger"><img src="'+newImgUrl+'" class="img-small"><div class="pi-canvas"></div></div>';var meta='<div class="meta"><div id="'+postId+'" class="quickviewButton"><span>'+settings.buttonText+'</span></div></div>';item='<div class="xbox">'+progressiveImage+meta+'</div>';skeleton+='<div class="item">'+item+'</div>'}
THIS.html(skeleton);new ProgressiveImage(document.getElementById('gallery-container'));$("#galleryLoading").fadeOut('fast')}
function catBuilder(entries){var catArray=[];for(var p=0;p<entries.length;++p){var categories=entries[p].category;for(x=0;x<categories.length;++x){var cat=categories[x].term;if(catArray.indexOf(cat)===-1){catArray.push(cat)}}}
catArray.sort((a,b)=>a.localeCompare(b));if(!($('#catNav ul').children().length>1)){for(y=0;y<catArray.length;++y){if(catArray[y]!="Gallery"){$('#catNav ul').append('<li><a href="/search/label/'+catArray[y]+'">'+catArray[y]+'</a></li>')}}};var items=entries.length;var TotalPages=Math.ceil((entries.length)/settings.maxItem);var pDom="",k,page="";page+='<li class="prev disabled pNavigate"><i class="fa fa-chevron-left"></i>';for(k=1;k<=TotalPages;++k){if(k==1){page+='<li class="active">'+k+'</li>'}else{page+='<li>'+k+'</li>'}}
if(TotalPages==1){page+='<li class="next disabled pNavigate"><i class="fa fa-chevron-right"></i></li>'}else{page+='<li class="next pNavigate"><i class="fa fa-chevron-right"></i></li>'}
pDom+='<ul>'+page+'</ul>';$("#gallerypagination").html(pDom)}
var feedStartIndex=1;function processFeed(entries){if(allEntries.length<1){allEntries=entries}else{allEntries=allEntries.concat(entries)}
if(entries.length>=maxResults){feedStartIndex+=maxResults;getFeed()}else{window.TheGalleryFeed=allEntries;catBuilder(allEntries);GalleryBuilder(0,settings.maxItem);$("#quickview").data("label",settings.labelName);$("#galleryLoading").fadeOut('fast')}}
var getFeed;(getFeed=function(){var thisE=$(this),feedURL=settings.blogURL+'/feeds/posts/default/'+(settings.labelName.length==0?"":'-/'+settings.labelName.replace(/\,(\s+)?/g,"/"))+'?start-index='+feedStartIndex+'&max-results='+maxResults+'&orderby=published'+'&alt=json-in-script';console.log(feedURL);$.ajax({type:'GET',url:feedURL,async:!1,contentType:"application/json",dataType:'jsonp',success:function(json){entries=json.feed.entry||[];processFeed(entries)},error:function(xhr,status,error){thisE.append('<div class="error"><p>No Result! Or Error Loading Feed</p></div')},complete:function(){}})})()};$(document).ready(function(){$("#gallerypagination").on("click","li",function(e){var PageNumber=$(this).text();if($(this).hasClass('pNavigate')){var currentPageNum=$(this).closest('ul').find('li.active').text();if($(this).hasClass('next')){PageNumber=parseInt(currentPageNum)+1;$(this).closest('ul').find('li.active').removeClass('active').next().addClass('active');console.log(currentPageNum)};if($(this).hasClass('prev')){PageNumber=parseInt(currentPageNum)-1;$(this).closest('ul').find('li.active').removeClass('active').prev().addClass('active')}}else{$(this).closest('ul').find('li:not(.pNavigate)').removeClass('active');$(this).not(".pNavigate").addClass('active')}
var startIndex=(PageNumber-1)*maxItem;if(PageNumber>1){$(this).closest('ul').find('li.prev').removeClass('disabled')}else{$(this).closest('ul').find('li.prev').addClass('disabled')}
var LastPageIndex=$(this).closest('ul').find('li:not(.pNavigate)').last().text();if((PageNumber==LastPageIndex)){$(this).closest('ul').find('li.next').addClass('disabled')}else{$(this).closest('ul').find('li.next').removeClass('disabled')}
startX=startIndex;limitX=(startIndex+maxItem);console.log(startX);$("#galleryLoading").fadeIn('400',function(){GalleryBuilder(startIndex,(startIndex+maxItem))})})})})(jQuery)